<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Cadastro - Marketplace</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Parse SDK -->
  <script src="https://unpkg.com/parse/dist/parse.min.js"></script>
  <!-- Main JS -->
  <script src="js/main.js" defer></script>
</head>

<body>
  <div class="container mt-5">
    <h2 class="mb-4">Cadastro</h2>
    <form id="registerForm">
      <div class="mb-3">
        <label for="nome" class="form-label">Nome</label>
        <input type="text" class="form-control" id="nome" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" required>
      </div>
      <div class="mb-3">
        <label for="senha" class="form-label">Senha</label>
        <input type="password" class="form-control" id="senha" required>
      </div>
      <div class="mb-3">
        <label for="idade" class="form-label">Idade</label>
        <input type="number" class="form-control" id="idade" required min="0">
      </div>
      <div class="mb-3">
        <label for="tipo" class="form-label">Tipo de Usuário</label>
        <select class="form-select" id="tipo" required>
          <option value="" selected disabled>Selecione</option>
          <option value="cliente">Cliente</option>
          <option value="vendedor">Vendedor</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Cadastrar</button>
      <p class="mt-3">Já tem uma conta? <a href="login.html">Faça login</a></p>
    </form>
  </div>

  <script>
    // Configuração do Parse
    Parse.initialize("uN5Y1aXedE7dEvVvTUbpVSU6nuFBVSNpBVd550kz", "1VeLKickMsxP0RMsuxk7qJu7yKlxnDizSRFsS9P7");
    Parse.serverURL = "https://parseapi.back4app.com";

    // Função de cadastro
    const registerUser = async (nome, email, senha, idade, tipo) => {
      const user = new Parse.User();
      user.set("username", email);
      user.set("email", email);
      user.set("password", senha);
      user.set("nome", nome);
      user.set("idade", idade);
      user.set("tipo", tipo);
      try {
        await user.signUp();
        alert("Cadastro realizado com sucesso!");
        window.location.href = "login.html";
      } catch (error) {
        alert("Erro ao cadastrar: " + error.message);
      }
    };

    // Event Listener para o formulário de cadastro
    document.getElementById("registerForm").addEventListener("submit", (event) => {
      event.preventDefault();
      const nome = document.getElementById("nome").value.trim();
      const email = document.getElementById("email").value.trim();
      const senha = document.getElementById("senha").value.trim();
      const idade = parseInt(document.getElementById("idade").value.trim());
      const tipo = document.getElementById("tipo").value;
      registerUser(nome, email, senha, idade, tipo);
    });
  </script>
</body>

</html>